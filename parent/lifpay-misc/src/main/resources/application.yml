# 正确的数据源配置（主数据源）
spring:
  datasource:
    url: jdbc:mysql://43.156.23.117:3306/misc?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&autoReconnect=true&autoReconnectForPools=true&useSSL=false
    username: lifpay
    password: hcm@Lifpay.123!
#    url: jdbc:mysql://127.0.0.1:3306/misc?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&autoReconnect=true&autoReconnectForPools=true&useSSL=false
#    username: root
#    password: 123456789
    driver-class-name: com.mysql.cj.jdbc.Driver
    type: com.alibaba.druid.pool.DruidDataSource
    druid:
      # 以下是druid连接池的配置（保持不变）
      max-active: 20
      min-idle: 5
      max-wait: 60000
      test-on-borrow: false
      test-on-return: false
      test-while-idle: true
      time-between-eviction-runs-millis: 60000
      min-evictable-idle-time-millis: 30000
      initial-size: 5
      validation-query: select '1'
      filters: stat,wall
      filter:
        stat:
          merge-sql: true
          slow-sql-millis: 5000
          log-slow-sql: true
        wall:
          config:
            drop-table-allow: false
            create-table-allow: false
            truncate-allow: false
            alter-table-allow: false
      use-global-data-source-stat: true
      stat-view-servlet:
        login-username: admin
        login-password: admin
        url-pattern: /druid/*
      web-stat-filter:
        enabled: true
        url-pattern: /*
        exclusions: "*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*"
        profile-enable: true
  mail:
    # 1. 邮件服务器 SMTP 地址（不同邮箱不同，见下方说明）
    host: smtp.exmail.qq.com
    # 2. 端口（SMTP 端口：QQ/163 邮箱 SSL 端口 465；非 SSL 端口 25，但多数服务器禁用 25）
    port: 465
    # 3. 发送者邮箱账号（你的邮箱）
    username: jerry@lifpay.me
    # 4. 授权码（⚠️ 不是邮箱登录密码！需要单独申请，见下方说明）
    password: W5xf3wkUTiFDmSzW
    # 5. 加密方式（SSL 加密，必填，否则连接失败）
    properties:
      mail:
        smtp:
          ssl:
            enable: true
          # 开启认证（必须为 true）
          auth: true
        # 可选：设置超时时间，避免连接超时
        timeout: 5000
        socketFactory:
          port: 465
          class: javax.net.ssl.SSLSocketFactory

# flyway配置（如果需要使用flyway，保持以下配置，无需嵌套datasource）
server:
  port: 9012
#  flyway:
#    locations: classpath:db/migration
#    enabled: false  # 目前flyway是禁用的，不影响主数据源

# mybatis-plus配置（保持不变）
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.nologging.NoLoggingImpl
  mapper-locations: classpath*:mybatisMapper/**/*.xml




